<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>API Test</title>
</head>
<body>
    <h1>APIæ¥ç¶šãƒ†ã‚¹ãƒˆ2</h1>
    <button id="test-btn">APIãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
    <pre id="result"></pre>

    <script src="config.js"></script>
    <script>
        const resultEl = document.getElementById('result');
        const testBtn = document.getElementById('test-btn');

        testBtn.addEventListener('click', async () => {
            resultEl.textContent = 'ãƒ†ã‚¹ãƒˆä¸­...\n';
            
            // Step 1: APIã‚­ãƒ¼ã®ç¢ºèª
            if (typeof API_KEY === 'undefined') {
                resultEl.textContent += 'âŒ API_KEYãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“\n';
                return;
            }
            resultEl.textContent += 'âœ… API_KEYã¯èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™\n';
            resultEl.textContent += `   æœ€åˆã®10æ–‡å­—: ${API_KEY.substring(0, 10)}...\n\n`;
            
            // Step 2: APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: 'ã“ã‚“ã«ã¡ã¯' }] }]
                    })
                });
                
                resultEl.textContent += `ğŸ“¡ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: ${response.status}\n`;
                
                if (!response.ok) {
                    const errorData = await response.json();
                    resultEl.textContent += `âŒ ã‚¨ãƒ©ãƒ¼: ${JSON.stringify(errorData, null, 2)}\n`;
                } else {
                    const data = await response.json();
                    resultEl.textContent += `âœ… æˆåŠŸ!\n`;
                    resultEl.textContent += `   å¿œç­”: ${data.candidates[0].content.parts[0].text}\n`;
                }
            } catch (error) {
                resultEl.textContent += `âŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ: ${error.message}\n`;
            }
        });
    </script>
</body>
</html>
